<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>PixelBridge Configurator</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h3>ModLED Configuration</h3>
    <form id="modled-size">
        <div>
            <span>Module Configuration</span>
            <label for="modled-size-x">X:</label>
            <input type="number" id="modled-size-x" step="1" min="1" max="1024" data-bind="value: modLED.size.x">
            <label for="modled-size-y">Y:</label>
            <input type="number" id="modled-size-y" step="1" min="1" max="1024" data-bind="value: modLED.size.y">
        </div>

        <div>
            <input type="radio" name="config-type" id="simple" value="simple" data-bind="checked: modLED.configType">
            <label for="simple">Simple</label>
            <input type="radio" name="config-type" id="manual" value="manual" data-bind="checked: modLED.configType">
            <label for="manual">Manual</label>
        </div>

        <!-- <span data-bind="text: modLED.moduleNum"></span> -->

        <div>
            <div data-bind="visible: modLED.configType() == 'simple'">
                <h4>Common Module Settings</h4>
                <label>Base IP Address:</label>
                <!-- <input type="text" pattern="(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}" data-bind="value: modLED.subnetPrefix"> -->
                <!-- ko foreach: modLED.subnetPrefix -->
                <input type="number" class="ip-octet" min="0" max="255" data-bind="value: $data">
                <span>.</span>
                <!-- /ko -->
                <span>XXX</span>
                <br>
                <label for="same-port">Port:</label>
                <input type="number" min="1" max="65535" placeholder="Port" data-bind="value: modLED.samePort">
            </div>
            <h4>Individual Module Configuration</h4>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <!-- ko foreach: {data: new Array(Number(modLED.size.x())), as: 'x', noChildContext: true } -->
                        <th data-bind="text: xIndex() + 1"></th>
                        <!-- /ko -->
                    </tr>
                </thead>
                <tbody data-bind="foreach: {data: new Array(Number(modLED.size.y())), as: 'y', noChildContext: true }">
                    <tr>
                        <th data-bind="text: yIndex() + 1"></th>
                        <!-- ko foreach: {data: new Array(Number(modLED.size.x())), as: 'x', noChildContext: true } -->
                        <!-- ko let: idx = yIndex() * modLED.size.x() + xIndex() -->
                        <td>
                            <input type="text" data-bind="visible: modLED.configType() == 'manual', value: modLED.modules()[yIndex() * modLED.size.x() + xIndex()], attr: {placeholder: idx, id: idx, name: idx}">
                            <input type="number" class="ip-octet" min="0" max="255" data-bind="visible: modLED.configType() == 'simple', value: modLED.simpleHosts()[yIndex() * modLED.size.x() + xIndex()], attr: {placeholder: idx}">
                        </td>
                        <!-- /ko -->
                        <!-- /ko -->
                    </tr>
                </tbody>
            </table>
            <button data-bind="click: save">Save</button>
        </div>
    </form>

    <small class="attribution">Icon made by <a href="https://www.deviantart.com/nujumkey">NujumKey</a></small>

    <script src="https://ajax.aspnetcdn.com/ajax/knockout/knockout-3.5.0.js" type="text/javascript"></script>
    <script src="script.js"></script>
</body>

</html>